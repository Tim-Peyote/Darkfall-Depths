# HOTFIX v2.4.2 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–π –∑–æ–Ω—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞

**–î–∞—Ç–∞**: $(date)  
**–í–µ—Ä—Å–∏—è**: 2.4.2  
**–¢–∏–ø**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Ç—Ñ–∏–∫—Å

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –∏–≥—Ä–æ–≤–æ–π –∑–æ–Ω–æ–π**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ –º–µ—Ä–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ —É—Ä–æ–≤–Ω–µ–π –∫–∞—Ä—Ç–∞ —Ä–æ—Å–ª–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –∏–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π, –∏–∑-–∑–∞ —á–µ–≥–æ –ø—Ä–µ–¥–º–µ—Ç—ã –∏ –≤—Ä–∞–≥–∏ —Å–ø–∞–≤–Ω–∏–ª–∏—Å—å –≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞**: –¢–µ–ø–µ—Ä—å —Ä–∞—Å—Ç–µ—Ç –≤–º–µ—Å—Ç–µ —Å –∫–∞—Ä—Ç–æ–π (+24px –∑–∞ —É—Ä–æ–≤–µ–Ω—å)
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ä—Ç—ã**: –í—Å–µ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ MAP_SIZE
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏**: `GameEngine.isEntityVisible()` —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—é —É—Ä–æ–≤–Ω—è

**–§–∞–π–ª—ã**: `js/game/GameEngine.js`, `js/entities/Entity.js`, `js/map/WebGLFogOfWar.js`

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∞–±–∏—Ä–∏–Ω—Ç–∞**
**–ü—Ä–æ–±–ª–µ–º–∞**: –†–∞–∑–º–µ—Ä –∫–æ–º–Ω–∞—Ç —Ä–æ—Å —Å —É—Ä–æ–≤–Ω–µ–º, —Å–æ–∑–¥–∞–≤–∞—è –±–æ–ª—å—à–∏–µ –ø—É—Å—Ç—ã–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö –ª–∞–±–∏—Ä–∏–Ω—Ç–æ–≤.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
- ‚úÖ **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∫–æ–º–Ω–∞—Ç**: –ö–æ–º–Ω–∞—Ç—ã –±–æ–ª—å—à–µ –Ω–µ —Ä–∞—Å—Ç—É—Ç —Å —É—Ä–æ–≤–Ω–µ–º
- ‚úÖ **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å**: –ê–ª–≥–æ—Ä–∏—Ç–º –ü—Ä–∏–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç
- ‚úÖ **–£–º–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ**: –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ BSP —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å —É—á–µ—Ç–æ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏**: BFS –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏

**–§–∞–π–ª—ã**: `js/map/MapGenerator.js`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### GameEngine.js
```javascript
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –±—É—Ñ–µ—Ä –¥–ª—è –∏–≥—Ä–æ–≤–æ–π –∑–æ–Ω—ã
const dynamicBuffer = baseBuffer + (level - 1) * 24; // +24px –∑–∞ —É—Ä–æ–≤–µ–Ω—å
```

### Entity.js
```javascript
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ä—Ç—ã
const mapWidth = gameState.map[0] ? gameState.map[0].length : MAP_SIZE;
const mapHeight = gameState.map.length;
```

### MapGenerator.js
```javascript
// –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∫–æ–º–Ω–∞—Ç
const dynamicMinSize = ROOM_MIN_SIZE; // –ù–µ —Ä–∞—Å—Ç–µ—Ç —Å —É—Ä–æ–≤–Ω–µ–º
const dynamicMaxSize = ROOM_MAX_SIZE; // –ù–µ —Ä–∞—Å—Ç–µ—Ç —Å —É—Ä–æ–≤–Ω–µ–º

// –ê–ª–≥–æ—Ä–∏—Ç–º –ü—Ä–∏–º–∞ –¥–ª—è —Å–≤—è–∑–Ω–æ—Å—Ç–∏
static connectRooms(map, rooms) {
  // –°–æ–∑–¥–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –æ—Å—Ç–æ–≤–Ω–æ–µ –¥–µ—Ä–µ–≤–æ
  // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç
}
```

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è —É—Ä–æ–≤–Ω–µ–π (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)

| –£—Ä–æ–≤–µ–Ω—å | –†–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã | –ö–æ–º–Ω–∞—Ç | –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ |
|---------|-------------|--------|--------------|
| 1       | 60x60       | 10-15  | 100px –±—É—Ñ–µ—Ä  |
| 6       | 69x69       | 12-19  | 220px –±—É—Ñ–µ—Ä  |
| 10      | 75x75       | 14-21  | 316px –±—É—Ñ–µ—Ä  |
| 15      | 82x82       | 16-24  | 436px –±—É—Ñ–µ—Ä  |

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **–ü—Ä–µ–¥–º–µ—Ç—ã –±–æ–ª—å—à–µ –Ω–µ —Å–ø–∞–≤–Ω—è—Ç—Å—è –≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö**
2. **–ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –ø–æ –≤—Å–µ–π –∫–∞—Ä—Ç–µ**
3. **–õ–∞–±–∏—Ä–∏–Ω—Ç —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç, –∞ –Ω–µ –∏—Ö —Ä–∞–∑–º–µ—Ä)
4. **–í—Å–µ –∫–æ–º–Ω–∞—Ç—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã**
5. **–ú–∏–Ω–∏–∫–∞—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å—é –∫–∞—Ä—Ç—É**
6. **–¢—É–º–∞–Ω –≤–æ–π–Ω—ã —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Ä–∞–∑–º–µ—Ä–æ–º –∫–∞—Ä—Ç—ã**

### üöÄ –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞—Ä—Ç—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ culling –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤
- –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∞–±–∏—Ä–∏–Ω—Ç–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π 1-15
- ‚úÖ –°–ø–∞–≤–Ω –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö
- ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ –ø–æ –≤—Å–µ–π –∫–∞—Ä—Ç–µ
- ‚úÖ –°–≤—è–∑–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –º–∏–Ω–∏–∫–∞—Ä—Ç—ã
- ‚úÖ –¢—É–º–∞–Ω –≤–æ–π–Ω—ã –Ω–∞ –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç–∞—Ö

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å 6: –ü—Ä–µ–¥–º–µ—Ç—ã –≤ –∏–≥—Ä–æ–≤–æ–π –∑–æ–Ω–µ
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å 10: –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å 15: –°—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üìù –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –†–∞–∑–º–µ—Ä –∫–æ–º–Ω–∞—Ç –æ—Å—Ç–∞–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø—É—Ç–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –±—É—Ñ–µ—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –æ–±–ª–∞—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

## üîÑ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è–º–∏
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∞–ª–∞–Ω—Å –∏–≥—Ä—ã

---

**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  
**–í–ª–∏—è–Ω–∏–µ**: –í—ã—Å–æ–∫–æ–µ (–∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≥–µ–π–º–ø–ª–µ—è)
